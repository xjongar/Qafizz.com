<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type Race</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: #fafafa;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #111;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: #fff;
            border: 1px solid #e0e0e0;
            padding: 10px 20px;
            border-radius: 6px;
            text-decoration: none;
            color: #333;
            font-size: 0.9rem;
            z-index: 1000;
            transition: all 0.2s;
        }

        .back-button:hover {
            background: #f5f5f5;
        }

        .container {
            max-width: 900px;
            width: 90%;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 300;
            margin-bottom: 50px;
            color: #000;
            letter-spacing: -1px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 80px;
            margin-bottom: 50px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 4rem;
            font-weight: 200;
            display: block;
            margin-bottom: 8px;
            color: #000;
        }

        .stat-label {
            font-size: 0.85rem;
            opacity: 0.5;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 3px;
            background: #e5e5e5;
            margin-bottom: 50px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #000;
            width: 0%;
            transition: width 0.2s;
        }

        .text-display {
            background: #fff;
            padding: 50px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 2rem;
            line-height: 2.5;
            text-align: left;
            letter-spacing: 0.5px;
            min-height: 220px;
            border: 1px solid #e0e0e0;
            font-family: 'Courier New', monospace;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .char {
            transition: all 0.1s;
            color: #999;
        }

        .char.correct {
            color: #22c55e;
            font-weight: 500;
        }

        .char.incorrect {
            color: #ef4444;
            font-weight: 500;
        }

        .char.current {
            border-bottom: 3px solid #000;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { border-bottom-color: #000; }
            51%, 100% { border-bottom-color: transparent; }
        }

        .input-area {
            background: #fff;
            border: 1px solid #e0e0e0;
            color: #000;
            font-size: 2rem;
            padding: 25px;
            border-radius: 8px;
            width: 100%;
            font-family: 'Courier New', monospace;
            outline: none;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            transition: all 0.2s;
        }

        .input-area:focus {
            border-color: #000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .input-area::placeholder {
            color: #ccc;
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .btn {
            background: #000;
            border: 1px solid #000;
            color: #fff;
            padding: 15px 40px;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .btn:hover {
            background: #333;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .message {
            font-size: 1.1rem;
            margin-top: 30px;
            color: #666;
        }

        .complete {
            font-size: 2rem;
            margin-top: 30px;
            animation: fadeIn 0.5s;
            color: #000;
            font-weight: 300;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .stats {
                gap: 40px;
            }

            .stat-value {
                font-size: 3rem;
            }

            .text-display {
                font-size: 1.5rem;
                padding: 30px;
            }

            .input-area {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-button">← back</a>

    <div class="container">
        <h1>Type Race</h1>

        <div class="stats">
            <div class="stat">
                <span class="stat-value" id="wpm">0</span>
                <span class="stat-label">WPM</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="accuracy">100</span>
                <span class="stat-label">Accuracy</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="timer">0</span>
                <span class="stat-label">Time</span>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>

        <div class="text-display" id="text-display"></div>

        <input type="text" class="input-area" id="input" placeholder="Start typing here..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">

        <div class="controls">
            <button class="btn" id="restart">New Text</button>
        </div>

        <div class="message" id="message">Start typing to begin</div>
    </div>

    <script>
        const texts = [
            "The quick brown fox jumps over the lazy dog near the riverbank.",
            "Programming is the art of telling another human what one wants the computer to do.",
            "In the middle of difficulty lies opportunity waiting to be discovered.",
            "The only way to do great work is to love what you do every single day.",
            "Innovation distinguishes between a leader and a follower in any field.",
            "Life is what happens when you're busy making other plans for the future.",
            "Success is not final, failure is not fatal: it is the courage to continue that counts.",
            "The future belongs to those who believe in the beauty of their dreams.",
            "Technology is best when it brings people together and makes lives better.",
            "Every great developer you know got there by solving problems they were unqualified to solve until they actually did it."
        ];

        let currentText = '';
        let startTime = null;
        let timerInterval = null;
        let currentIndex = 0;

        const textDisplay = document.getElementById('text-display');
        const input = document.getElementById('input');
        const wpmEl = document.getElementById('wpm');
        const accuracyEl = document.getElementById('accuracy');
        const timerEl = document.getElementById('timer');
        const progressEl = document.getElementById('progress');
        const messageEl = document.getElementById('message');
        const restartBtn = document.getElementById('restart');

        function getRandomText() {
            return texts[Math.floor(Math.random() * texts.length)];
        }

        function initGame() {
            currentText = getRandomText();
            currentIndex = 0;
            startTime = null;
            input.value = '';
            input.disabled = false;
            input.focus();

            clearInterval(timerInterval);
            wpmEl.textContent = '0';
            accuracyEl.textContent = '100';
            timerEl.textContent = '0';
            progressEl.style.width = '0%';
            messageEl.textContent = 'Start typing to begin';

            renderText();
        }

        function renderText() {
            const typed = input.value;
            let html = '';

            for (let i = 0; i < currentText.length; i++) {
                const char = currentText[i];
                let className = '';

                if (i < typed.length) {
                    className = typed[i] === char ? 'correct' : 'incorrect';
                } else if (i === typed.length) {
                    className = 'current';
                }

                html += `<span class="char ${className}">${char}</span>`;
            }

            textDisplay.innerHTML = html;
        }

        function calculateWPM() {
            if (!startTime) return 0;
            const timeElapsed = (Date.now() - startTime) / 1000 / 60; // minutes
            const wordsTyped = input.value.trim().split(/\s+/).length;
            return Math.round(wordsTyped / timeElapsed) || 0;
        }

        function calculateAccuracy() {
            const typed = input.value;
            if (typed.length === 0) return 100;

            let correct = 0;
            for (let i = 0; i < typed.length; i++) {
                if (typed[i] === currentText[i]) correct++;
            }

            return Math.round((correct / typed.length) * 100);
        }

        function updateStats() {
            wpmEl.textContent = calculateWPM();
            accuracyEl.textContent = calculateAccuracy();

            if (startTime) {
                const seconds = Math.floor((Date.now() - startTime) / 1000);
                timerEl.textContent = seconds;
            }

            const progress = (input.value.length / currentText.length) * 100;
            progressEl.style.width = `${Math.min(progress, 100)}%`;
        }

        function checkComplete() {
            if (input.value === currentText) {
                clearInterval(timerInterval);
                input.disabled = true;

                const finalWPM = calculateWPM();
                const finalAccuracy = calculateAccuracy();
                const finalTime = Math.floor((Date.now() - startTime) / 1000);

                messageEl.innerHTML = `
                    <div class="complete">
                        Complete!<br>
                        ${finalWPM} WPM · ${finalAccuracy}% Accuracy · ${finalTime}s
                    </div>
                `;
            }
        }

        input.addEventListener('input', (e) => {
            if (!startTime) {
                startTime = Date.now();
                messageEl.textContent = 'Keep typing...';
                timerInterval = setInterval(updateStats, 100);
            }

            renderText();
            updateStats();
            checkComplete();
        });

        restartBtn.addEventListener('click', initGame);

        // Prevent pasting
        input.addEventListener('paste', (e) => {
            e.preventDefault();
        });

        initGame();
    </script>
</body>
</html>
